{% extends 'back.html.twig' %}

{% block body %}
   <div class="container">
    <h1>Commandes list</h1>
    <div class="col-md-7 align-self-center text-right">
            <div class="d-flex justify-content-end align-items-center">
Nombre Total de Produit Vendue : {{total}}             <br>
Montant Total de Produit Vendue : {{somme}}.000 dt
            </div>
        </div>
    </div>
<div class="table-scrollable">
    <table
            class="table table-striped table-bordered table-hover table-checkable order-column valign-middle"
            id="example4">
        <thead>
        
        <tr>
            <th>Id</th>
            <th  >date</th>
            <th  >email</th>
            <th  >montant total</th>
                        <th  >adress livraison</th>

                        <th  >qrcode</th>
            <th  >Action</th>
            
        </tr>
        </thead>
        <tbody>
        {% for commande in commandes %}
                 <tr class="odd gradeX">

             <td > <a href="{{ path('commande_show', { 'id': commande.id }) }}" > {{ commande.id }} </a></td>
                <td>{{ commande.date }}</td>
                <td>{{ commande.userid.email }}</td>
                <td>{{ commande.montant }}</td>
                                                <td>{{ commande.adress }}</td>

                            <td><img src="{{ commande.qrcode  }} " width="60px" height="50px" /> </td>

                <td>
                <a class="btn btn-outline-danger"  href="{{ path('commande_delete2', { 'id': commande.id }) }}"> Supprimer </a>
                                  <a  class="btn" onclick="myFunction()" >generer facture</a>

                
            </td>
        </tr>
           
                   
                              <tr class="odd gradeX">
            <th  >#</th>
            <th  >Nom</th>
            <th  >Prix</th>
        </tr>
                   {% for Produit in commande.produit %}
                                    <tr class="odd gradeX">

                     <td></td>
                <td>{{ Produit.nom }}</td>
                                <td>{{ Produit.prix }}</td>

                
                  </tr>
                   </hr>
                 {% endfor %}
            <script type="text/javascript">
function myFunction() {
    
        window.open("{{ path('facture', { 'id': commande.id }) }}");
   
   }
     </script>
     
        {% endfor %}
        </tbody>
    </table>


                      
{% endblock %}
{% block javascripts %}
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>

     </script>
{% endblock %}    